# gosite
<!-- START_SECTION:BADGES_SECTION -->
<a href="docs/img/badges.svg"><img src="docs/img/badges.svg" alt="Project Badges" title="Generated by badges package from github.com/cdvelop/devscripts"></a>
<!-- END_SECTION:BADGES_SECTION -->

`gosite` is a programmatic Go framework for building websites. It follows a "write once, run anywhere" philosophy, allowing you to define your site structure and components a single time in shared Go code. The framework adapts its behavior based on the compilation target:

- **Backend (`!wasm`)**: Generates a static website (HTML, CSS, JS).
- **Frontend (`wasm`)**: Renders the site as a dynamic Single-Page Application (SPA) in the browser.

## Features

- **Fluent API**: A clean, chained API for building pages and components.
- **Component-Based**: Build your UI with reusable, self-contained components.
- **Environment-Specific Builds**: Uses Go build tags to separate backend and frontend logic.
- **TinyGo Compatible**: Designed to produce small WASM binaries by strictly using `tinystring`.

## Usage

Here's a minimal example of how to create a static site with two pages. This code is designed for a backend build (`//go:build !wasm`).

```go
// main.go
//go:build !wasm

package main

import (
	"os"

	"github.com/cdvelop/gosite"
	"github.com/cdvelop/gosite/components/card" // Example component
	. "github.com/cdvelop/tinystring"
)

func main() {
	// 1. Configure the site
	cfg := &gosite.Config{
		Title:     "My Awesome Site",
		OutputDir: "dist",
		WriteFile: func(path, content string) error {
			return os.WriteFile(path, []byte(content), 0644)
		},
	}

	// 2. Create a new site instance
	site := gosite.New(cfg)

	// 3. Build the home page
	homePage := site.NewPage("Home", "index.html")
	homeSection := homePage.NewSection("Welcome")
	homeSection.Add(&card.Card{
		Title:       "Hello, gosite!",
		Description: "This is a card component on the home page.",
	})

	// 4. Build the about page
	aboutPage := site.NewPage("About", "about.html")
	aboutSection := aboutPage.NewSection("About Us")
	aboutSection.Add(&card.Card{
		Title:       "Our Mission",
		Description: "To make building websites with Go simple and fun.",
	}).Add(&card.Card{
		Title:       "Our Vision",
		Description: "A world where Go powers the web.",
	})

	// 5. Generate the static site files
	if err := site.Generate(); err != nil {
		panic(err)
	}

	println("Site generated successfully in 'dist' directory!")
}
```

### Running the Example

1. **Save the code**: Save the example above as `main.go`.
2. **Tidy dependencies**:
   ```bash
   go mod tidy
   ```
3. **Run the generator**:
   ```bash
   go run main.go
   ```

This will create a `dist` directory with the following structure:
```
dist/
├── index.html
├── about.html
├── style.css
└── script.js
```
